var f=Object.defineProperty,h=Object.defineProperties;var v=Object.getOwnPropertyDescriptors;var c=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var m=(a,t,e)=>t in a?f(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,l=(a,t)=>{for(var e in t||(t={}))b.call(t,e)&&m(a,e,t[e]);if(c)for(var e of c(t))$.call(t,e)&&m(a,e,t[e]);return a},n=(a,t)=>h(a,v(t));import{a as g,i as _,c as w,n as y}from"./index.f4b33e31.js";import{R as k}from"./Recaptcha.9f7df94f.js";var d=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"container"},[e("div",{staticClass:"section"},[e("div",{staticClass:"content"},[e("div",{staticClass:"page-title"},[a._v(a._s(a.$t("auth.register.title")))]),e("div",{staticClass:"columns"},[e("div",{staticClass:"column is-6"},[e("ValidationObserver",{ref:"observer",attrs:{tag:"form"},on:{submit:function(r){return r.preventDefault(),a.handleSubmit.apply(null,arguments)}}},[e("ValidationProvider",{attrs:{name:a.$t("customer.common.first-name"),rules:"required",slim:""},scopedSlots:a._u([{key:"default",fn:function(r){var s=r.errors,i=r.valid;return[e("b-field",{class:{"is-filled":!!a.firstName,"has-error":s[0]},attrs:{type:{"is-danger":s[0],"is-success":i},message:s,label:a.$t("customer.common.first-name"),"label-for":`${a.$options.name}-first-name`,horizontal:""}},[e("b-input",{attrs:{id:`${a.$options.name}-first-name`,name:"first_name"},model:{value:a.firstName,callback:function(o){a.firstName=o},expression:"firstName"}})],1)]}}])}),e("ValidationProvider",{attrs:{name:a.$t("customer.common.last-name"),rules:"required",slim:""},scopedSlots:a._u([{key:"default",fn:function(r){var s=r.errors,i=r.valid;return[e("b-field",{class:{"is-filled":!!a.lastName,"has-error":s[0]},attrs:{type:{"is-danger":s[0],"is-success":i},message:s,label:a.$t("customer.common.last-name"),"label-for":`${a.$options.name}-last-name`,horizontal:""}},[e("b-input",{attrs:{id:`${a.$options.name}-last-name`,name:"last_name"},model:{value:a.lastName,callback:function(o){a.lastName=o},expression:"lastName"}})],1)]}}])}),e("ValidationProvider",{attrs:{name:a.$t("customer.common.email"),rules:"required|email",slim:""},scopedSlots:a._u([{key:"default",fn:function(r){var s=r.errors,i=r.valid;return[e("b-field",{class:{"is-filled":!!a.email,"has-error":s[0]},attrs:{type:{"is-danger":s[0],"is-success":i},message:s,label:a.$t("customer.common.email"),"label-for":`${a.$options.name}-email`,horizontal:""}},[e("b-input",{attrs:{id:`${a.$options.name}-email`,name:"email",autocomplete:"off"},model:{value:a.email,callback:function(o){a.email=o},expression:"email"}})],1)]}}])}),e("ValidationProvider",{attrs:{name:a.$t("customer.common.password"),rules:"required|min:6",slim:""},scopedSlots:a._u([{key:"default",fn:function(r){var s=r.errors,i=r.valid;return[e("b-field",{class:{"is-filled":!!a.password,"has-error":s[0]},attrs:{type:{"is-danger":s[0],"is-success":i},message:s,label:a.$t("customer.common.password"),"label-for":`${a.$options.name}-password`,horizontal:""}},[e("b-input",{attrs:{id:`${a.$options.name}-password`,name:"password",autocomplete:"new-password","password-reveal":""},model:{value:a.password,callback:function(o){a.password=o},expression:"password"}})],1)]}}])}),e("b-field",[a.isRecaptchaActive?e("re-captcha",{ref:"recaptcha",attrs:{sitekey:a.recaptchaPublicKey,callback:a.captchaCallback}}):a._e()],1),e("br"),e("div",{staticClass:"buttons"},[e("button",{staticClass:"button is-primary is-medium",attrs:{disabled:!a.isButtonActive}},[a._v(" "+a._s(a.$t("auth.register.submit"))+" ")])])],1),e("b-loading",{attrs:{"is-full-page":!1,active:a.loading}})],1)])])])])},C=[];d._withStripped=!0;const N={name:"RegisterForm",metaInfo(){return{title:this.$t("auth.register.title")}},components:{ReCaptcha:k},data(){return{recaptchaVerified:!1,loading:!1,firstName:"",lastName:"",email:"",password:"",passwordConfirmation:"",taxvat:""}},computed:n(l({},g({recaptchaPublicKey:a=>a.app&&a.app.config.recaptcha_key})),{isRecaptchaActive(){return _},isButtonActive(){return!0}}),methods:n(l({},w({login:"auth/login",register:"auth/register"})),{captchaCallback(a){this.recaptchaVerified=!!a},handleSubmit(){this.$refs.observer.validate().then(async a=>{if(a){if(this.$refs.recaptcha&&!this.recaptchaVerified)return this.raiseError(this.$t("captcha.invalid")),!1;this.loading=!0;try{await this.register({email:this.email,firstname:this.firstName,lastname:this.lastName,password:this.password,taxvat:this.taxvat}),await this.login({username:this.email,password:this.password}),this.$router.push({path:"/customer/account"})}catch{}this.loading=!1}})}})},u={};var p=y(N,d,C,!1,x,null,null,null);function x(a){for(let t in u)this[t]=u[t]}p.options.__file="src/pages/auth/register.vue";var R=function(){return p.exports}();export{R as default};
