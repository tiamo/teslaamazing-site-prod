var _=Object.defineProperty,v=Object.defineProperties;var m=Object.getOwnPropertyDescriptors;var e=Object.getOwnPropertySymbols;var u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable;var r=(s,i,t)=>i in s?_(s,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[i]=t,o=(s,i)=>{for(var t in i||(i={}))u.call(i,t)&&r(s,t,i[t]);if(e)for(var t of e(i))p.call(i,t)&&r(s,t,i[t]);return s},l=(s,i)=>v(s,m(i));import{c as h,ae as f,n as C}from"./index.2e7b3162.js";const g=(s,i)=>{if(window.btoa)return btoa(`order_id:${s}:${i}`).replace("+","-").replace("/","_").replace("=",",")},b=(s,i)=>{const t=g(s,i);return t?`/shipping/tracking/popup?hash=${t}`:null};var n=function(){var s=this,i=s.$createElement,t=s._self._c||i;return t("div",{staticClass:"modal-card order-modal"},[t("div",{staticClass:"modal-card-head"},[t("div",{staticClass:"columns is-marginless is-mobile"},[t("div",{staticClass:"column is-one-quarter"},[t("div",{staticClass:"title heading"},[s._v(s._s(s.$t("sales.order.date")))]),t("div",[s._v(s._s(s._f("formatDate")(s.order.created_at)))])]),t("div",{staticClass:"column is-one-quarter"},[t("div",{staticClass:"title heading"},[s._v(s._s(s.$t("sales.order.number")))]),t("b",[s._v(s._s(s.order.increment_id))])]),t("div",{staticClass:"column is-one-quarter"},[t("div",{staticClass:"title heading"},[s._v(s._s(s.$t("sales.grand-total")))]),t("div",[s._v(s._s(s._f("price")(s.order.grand_total)))])]),t("div",{staticClass:"column is-one-quarter has-text-right"},[t("button",{staticClass:"button is-active is-outlined is-small"},[s._v(" "+s._s(s.order.status)+" ")])])])]),t("div",{staticClass:"modal-card-body"},[t("div",{staticClass:"columns is-mobile"},[t("div",{staticClass:"column is-half"},[t("div",{staticClass:"title is-size-6"},[s._v(" "+s._s(s.$t("sales.order.shipping-address"))+" ")]),t("div",{domProps:{innerHTML:s._s(s.$options.filters.formatAddress(s.order.shipping_address))}})]),t("div",{staticClass:"column is-half"},[t("div",{staticClass:"title is-size-6"},[s._v(" "+s._s(s.$t("sales.order.billing-address"))+" ")]),t("div",{domProps:{innerHTML:s._s(s.$options.filters.formatAddress(s.order.billing_address))}})])]),t("div",{staticClass:"columns is-mobile"},[t("div",{staticClass:"column is-half"},[t("div",{staticClass:"title is-size-6"},[s._v(" "+s._s(s.$t("sales.order.shipping-method"))+" ")]),t("p",[s._v(s._s(s.order.shipping_description))])]),t("div",{staticClass:"column is-half"},[t("div",{staticClass:"title is-size-6"},[s._v(" "+s._s(s.$t("sales.order.payment-method"))+" ")]),t("div",[s._v(s._s(s.order.payment.additional_information[0]))])])]),t("hr"),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-half"},[t("div",{staticClass:"title is-size-6"},[s._v(s._s(s.$t("sales.order.summary")))]),t("div",{staticClass:"columns is-mobile is-gapless is-marginless"},[t("div",{staticClass:"column"},[s._v(s._s(s.$t("sales.subtotal")))]),t("div",{staticClass:"column is-narrow"},[s._v(s._s(s._f("price")(s.order.subtotal)))])]),t("div",{staticClass:"columns is-mobile is-gapless is-marginless"},[t("div",{staticClass:"column"},[s._v(s._s(s.$t("sales.order.shipping-fee")))]),t("div",{staticClass:"column is-narrow"},[s._v(" "+s._s(s._f("price")(s.order.shipping_amount))+" ")])]),s.order.discount_amount?t("div",{staticClass:"columns is-mobile is-gapless is-marginless"},[t("div",{staticClass:"column"},[s._v(s._s(s.$t("sales.discount")))]),t("div",{staticClass:"column is-narrow"},[s._v(" "+s._s(s._f("price")(s.order.discount_amount))+" ")])]):s._e(),t("div",{staticClass:"columns is-mobile is-gapless is-marginless"},[t("div",{staticClass:"column is-uppercase"},[s._v(s._s(s.$t("sales.grand-total")))]),t("div",{staticClass:"column is-narrow"},[s._v(s._s(s._f("price")(s.order.grand_total)))])])])]),t("hr"),t("table",{staticClass:"table is-fullwidth is-narrow is-bordered is-striped"},[t("thead",[t("tr",{staticClass:"has-background-light"},[t("th",[s._v(s._s(s.$t("sales.order-item.name")))]),t("th",[s._v(s._s(s.$t("sales.order-item.price")))]),t("th",[s._v(s._s(s.$t("sales.order-item.qty")))])])]),t("tbody",s._l(s.order.items,function(a){return t("tr",{key:a.item_id},[t("td",[s._v(s._s(a.name))]),t("td",[s._v(s._s(s._f("price")(a.price)))]),t("td",[s._v(s._s(a.qty_ordered))])])}),0)])]),t("div",{staticClass:"modal-card-foot"},[t("a",{ref:"pdfLink",attrs:{download:`order${s.order.increment_id}.pdf`}}),t("button",{staticClass:"button",on:{click:s.printInvoices}},[t("b-icon",{attrs:{icon:"printer",size:"is-small"}})],1),t("div",{staticClass:"buttons is-right"},[s.trackingUrl?t("router-link",{staticClass:"button is-primary",attrs:{to:s.trackingUrl,target:"_blank"}},[s._v(" "+s._s(s.$t("sales.order.track"))+" ")]):s._e(),t("button",{staticClass:"button",on:{click:s.close}},[s._v(s._s(s.$t("common.close")))])],1)])])},$=[];n._withStripped=!0;const k={props:{order:{type:Object,default:()=>Object.create(null)}},data(){return{loading:!1}},computed:{trackingUrl(){return b(this.order.entity_id,this.order.protect_code)}},methods:l(o({},h({getOrder:"auth/getOrder"})),{close(){this.$parent.close()},async printInvoices(){if(!this.$refs.pdfLink.href){this.$store.commit("app/SET_LOADING",!0);const s=await f.post(`V1/orders/${this.order.entity_id}/print/invoices`);this.$store.commit("app/SET_LOADING",!1),this.$refs.pdfLink.href="data:application/octet-stream;base64,"+escape(s.data)}this.$refs.pdfLink.click()}})},d={};var c=C(k,n,$,!1,y,"18104a3e",null,null);function y(s){for(let i in d)this[i]=d[i]}c.options.__file="src/pages/customer/order.vue";var z=function(){return c.exports}();export{z as default};
